{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/anonymousfiles/Desktop/Advanced Web Development/Project/Treasure-Hunt/AddNewCache.js\";\n\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useEffect, useState } from 'react';\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport { db } from \"./FirebaseManager\";\nimport * as Location from 'expo-location';\n\nvar AddNewCache = function AddNewCache() {\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      cacheNameInput = _useState2[0],\n      setCacheNameInput = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      descriptionInput = _useState4[0],\n      setDescriptionInput = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      latitudeInput = _useState6[0],\n      setLatitudeInput = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      longitudeInput = _useState8[0],\n      setLongitudeInput = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      _useState10 = _slicedToArray(_useState9, 2),\n      currentUsername = _useState10[0],\n      setCurrentUserName = _useState10[1];\n\n  var _useState11 = useState({}),\n      _useState12 = _slicedToArray(_useState11, 2),\n      currentCoordinates = _useState12[0],\n      setCurrentCoordinates = _useState12[1];\n\n  useEffect(function () {\n    AsyncStorage.getItem(\"username\").then(function (dataFromStorage) {\n      console.log(dataFromStorage);\n      setCurrentUserName(dataFromStorage);\n    }).catch(function (error) {\n      console.log(\"Error getting dataFromStorage:\" + error);\n    });\n  }, []);\n\n  var useCurrentLocationPressed = function useCurrentLocationPressed() {\n    Location.requestForegroundPermissionsAsync().then(function (result) {\n      if (result.status === \"granted\") {\n        return Location.getCurrentPositionAsync({});\n      } else {\n        setMsg(\"Permission \" + result.status);\n      }\n    }).then(function (location) {\n      console.log(\"location received\");\n      console.log(location);\n      var coordinates = {\n        lat: location.coords.latitude,\n        long: location.coords.longitude\n      };\n      console.log(coordinates);\n      setLatitudeInput(String(location.coords.latitude));\n      setLongitudeInput(String(coordinates.long));\n      setCurrentCoordinates(coordinates);\n    }).catch(function (error) {\n      alert(\"Error while requesting location / granting permission: \" + error);\n    });\n  };\n\n  var addPressed = function addPressed() {\n    if (!cacheNameInput.trim()) {\n      alert(\"Please enter the name of the geocache cache\");\n    } else if (!descriptionInput.trim()) {\n      alert(\"Please enter a description of the cache\");\n    } else if (!latitudeInput.trim()) {\n      alert(\"Please enter the latitude\");\n    } else if (!longitudeInput.trim()) {\n      alert(\"Please enter the longitude\");\n    } else {\n      var newCache = {\n        cacheName: cacheNameInput,\n        cacheDescripto: descriptionInput,\n        latitude: latitudeInput,\n        longitude: longitudeInput,\n        postedBy: currentUsername\n      };\n      db.collection(\"caches\").add(newCache).then(function (docRef) {\n        alert(\"Cache added with id: \\n\" + docRef.id);\n      }).catch(function (error) {\n        alert(\"Error adding Cache: \" + error);\n      });\n    }\n  };\n\n  return React.createElement(SafeAreaView, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }\n  }, React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, \"Name of cache: \"), React.createElement(TextInput, {\n    placeholder: \"enter the name of the cache\",\n    value: cacheNameInput,\n    onChangeText: setCacheNameInput,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }\n  }, \"Description: \"), React.createElement(TextInput, {\n    placeholder: \"enter a description of the cache\",\n    value: descriptionInput,\n    onChangeText: setDescriptionInput,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 13\n    }\n  }, \"Latitude: \"), React.createElement(TextInput, {\n    placeholder: \"enter the Latitude\",\n    value: latitudeInput,\n    onChangeText: setLatitudeInput,\n    keyboardType: \"decimal-pad\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }\n  }), React.createElement(Text, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 13\n    }\n  }, \"Longitude: \"), React.createElement(TextInput, {\n    placeholder: \"enter the Longitude\",\n    value: longitudeInput,\n    onChangeText: setLongitudeInput,\n    keyboardType: \"decimal-pad\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }\n  }), React.createElement(Button, {\n    title: \"Use Current Location\",\n    onPress: useCurrentLocationPressed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }), React.createElement(Button, {\n    title: \"Add\",\n    onPress: addPressed,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default AddNewCache;","map":{"version":3,"sources":["/Users/anonymousfiles/Desktop/Advanced Web Development/Project/Treasure-Hunt/AddNewCache.js"],"names":["AsyncStorage","React","useEffect","useState","db","Location","AddNewCache","cacheNameInput","setCacheNameInput","descriptionInput","setDescriptionInput","latitudeInput","setLatitudeInput","longitudeInput","setLongitudeInput","currentUsername","setCurrentUserName","currentCoordinates","setCurrentCoordinates","getItem","then","dataFromStorage","console","log","catch","error","useCurrentLocationPressed","requestForegroundPermissionsAsync","result","status","getCurrentPositionAsync","setMsg","location","coordinates","lat","coords","latitude","long","longitude","String","alert","addPressed","trim","newCache","cacheName","cacheDescripto","postedBy","collection","add","docRef","id"],"mappings":"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","sourcesContent":["import AsyncStorage from '@react-native-async-storage/async-storage';\nimport React, { useEffect, useState } from 'react';\nimport { SafeAreaView, Text, Button, TextInput } from 'react-native';\nimport { db } from './FirebaseManager';\nimport * as Location from 'expo-location';\n\nconst AddNewCache = () => {\n\n    let [cacheNameInput, setCacheNameInput] = useState(\"\");\n    let [descriptionInput, setDescriptionInput] = useState(\"\");\n    let [latitudeInput, setLatitudeInput] = useState(\"\");\n    let [longitudeInput, setLongitudeInput] = useState(\"\");\n\n    let [currentUsername, setCurrentUserName] = useState(\"\");\n    const [currentCoordinates, setCurrentCoordinates] = useState({});\n\n    useEffect(() => {\n        AsyncStorage.getItem(\"username\").then((dataFromStorage) => {\n            console.log(dataFromStorage);\n            setCurrentUserName(dataFromStorage);\n        })\n        .catch((error) => {\n            console.log(\"Error getting dataFromStorage:\"+error);\n        })\n    }, [])\n\n    const useCurrentLocationPressed = () => {\n        \n        Location.requestForegroundPermissionsAsync()\n    .then( (result) => {\n   \n     if(result.status === \"granted\"){\n      return Location.getCurrentPositionAsync({})\n\n     }\n  \n     else{\n       setMsg(\"Permission \"+result.status);\n     }\n  \n    })\n    .then( (location) => {\n      console.log(\"location received\");\n      console.log(location);\n\n      const coordinates = {\n        lat: location.coords.latitude,\n        long: location.coords.longitude\n      }\n      console.log(coordinates);\n\n      setLatitudeInput(String(location.coords.latitude));\n      setLongitudeInput(String(coordinates.long));\n      setCurrentCoordinates(coordinates);\n\n    })\n    .catch((error) => {\n      alert(\"Error while requesting location / granting permission: \"+error);\n    });\n    \n    }\n    \n\n    const addPressed = () => {\n\n        if(!cacheNameInput.trim()){\n            alert(\"Please enter the name of the geocache cache\");\n        }\n        else if(!descriptionInput.trim()){\n            alert(\"Please enter a description of the cache\");\n        }\n        else if(!latitudeInput.trim()) {\n            alert(\"Please enter the latitude\");\n        }\n\n        else if (!longitudeInput.trim()){\n            alert(\"Please enter the longitude\");\n        }\n\n        else {\n\n            let newCache = {\n\n                cacheName: cacheNameInput,\n                cacheDescripto: descriptionInput,\n                latitude: latitudeInput,\n                longitude: longitudeInput,\n                postedBy: currentUsername\n            }\n    \n            db.collection(\"caches\").add(newCache)\n            .then(\n                (docRef) => {\n                    alert(\"Cache added with id: \\n\"+docRef.id);\n                }\n            )\n            .catch(\n                (error) => {\n                    alert(\"Error adding Cache: \"+error);\n                }\n            )\n\n        }\n\n       \n    }\n\n    return(\n        <SafeAreaView>\n            <Text>Name of cache: </Text>\n            <TextInput placeholder=\"enter the name of the cache\" value={cacheNameInput} onChangeText={setCacheNameInput}></TextInput>\n\n            <Text>Description: </Text>\n            <TextInput placeholder=\"enter a description of the cache\" value={descriptionInput} onChangeText={setDescriptionInput}></TextInput>\n\n            <Text>Latitude: </Text>\n            <TextInput placeholder=\"enter the Latitude\" value={latitudeInput} onChangeText={setLatitudeInput} keyboardType=\"decimal-pad\"></TextInput>\n\n            <Text>Longitude: </Text>\n            <TextInput placeholder=\"enter the Longitude\" value={longitudeInput} onChangeText={setLongitudeInput} keyboardType=\"decimal-pad\"></TextInput>\n\n            <Button title=\"Use Current Location\" onPress={useCurrentLocationPressed}/>\n\n            <Button title=\"Add\" onPress={addPressed}/>\n\n        </SafeAreaView>\n    )\n}\n\nexport default AddNewCache;"]},"metadata":{},"sourceType":"module"}