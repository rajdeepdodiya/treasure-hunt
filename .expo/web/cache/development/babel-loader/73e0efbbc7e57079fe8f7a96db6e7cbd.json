{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"/Users/graphic/Desktop/Web Dev adv Project/treasure-hunt/CacheDetailsScreen.js\";\n\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport Switch from \"react-native-web/dist/exports/Switch\";\nimport { db } from \"./FirebaseManager\";\nimport * as location from 'expo-location';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport MapView, { Marker } from 'react-native-maps';\nimport Ionicons from \"@expo/vector-icons/Ionicons\";\n\nvar CacheDetailsScreen = function CacheDetailsScreen(_ref) {\n  var navigation = _ref.navigation,\n      route = _ref.route;\n  var locationInfo = route.params.locationInfo;\n  var user = route.params.user;\n  var userObj = {};\n  var userFavArray = [];\n\n  var _useState = useState(false),\n      _useState2 = _slicedToArray(_useState, 2),\n      isEnabled = _useState2[0],\n      setEnabled = _useState2[1];\n\n  var radioDataForTrackingStatus = [{\n    label: 'started',\n    accessibilityLabel: 'started'\n  }, {\n    label: 'in-progress',\n    accessibilityLabel: 'in-progress'\n  }, {\n    label: 'completed',\n    accessibilityLabel: 'Completed'\n  }];\n\n  var _React$useState = React.useState({\n    latitude: locationInfo.location.latitude,\n    longitude: locationInfo.location.longitude,\n    latitudeDelta: 0.005,\n    longitudeDelta: 0.005\n  }),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      currRegion = _React$useState2[0],\n      setCurrRegion = _React$useState2[1];\n\n  useEffect(function () {\n    console.log(\"user from route useeffect\" + user);\n    db.collection(\"users\").where(\"username\", \"==\", user).get().then(function (querySnapShot) {\n      if (querySnapShot.size === 0) {\n        console.log(\"useeffect\");\n        console.log(\"couldnt find user\");\n      } else {\n        querySnapShot.forEach(function (doc) {\n          userObj = doc;\n        });\n\n        if (\"favourites\" in userObj.data()) {\n          userFavArray = userObj.data().favourites;\n\n          if (userObj.data().favourites.includes(locationInfo.id)) {\n            setEnabled(true);\n          } else {\n            setEnabled(false);\n          }\n        }\n      }\n    }).catch();\n  }, []);\n\n  var showFavourites = function showFavourites() {\n    navigation.navigate(\"Favourites\");\n  };\n\n  var addOrDelete = function addOrDelete(value) {\n    setEnabled(value);\n    console.log(\" add or delete user\" + user);\n\n    if (value === true) {\n      addToFavourites();\n    } else {\n      deleteFromFavourites();\n    }\n  };\n\n  var deleteFromFavourites = function deleteFromFavourites() {\n    db.collection(\"users\").where(\"username\", \"==\", user).get().then(function (querySnapShot) {\n      console.log(\"user\" + user);\n\n      if (querySnapShot.size === 0) {\n        console.log(\"couldnt find user\");\n      } else {\n        querySnapShot.forEach(function (doc) {\n          userObj = doc;\n        });\n\n        if (\"favourites\" in userObj.data()) {\n          userFavArray = userObj.data().favourites;\n\n          if (userObj.data().favourites.includes(locationInfo.id)) {\n            var index = userObj.data().favourites.indexOf(locationInfo.id);\n\n            if (index > -1) {\n              userFavArray.splice(index, 1);\n            }\n          } else {\n            console.log(\"doesnt exist to delete\");\n          }\n        }\n\n        db.collection(\"users\").doc(userObj.id).update({\n          favourites: userFavArray\n        }).then(function () {\n          console.log(\"successfully finished update process = delete\");\n        }).catch(function (err) {\n          console.log(\"error while updating delete\");\n          console.log(err);\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  var addToFavourites = function addToFavourites() {\n    db.collection(\"users\").where(\"username\", \"==\", user).get().then(function (querySnapShot) {\n      if (querySnapShot.size === 0) {\n        console.log(\"couldnt find user\");\n      } else {\n        querySnapShot.forEach(function (doc) {\n          userObj = doc;\n        });\n\n        if (\"favourites\" in userObj.data()) {\n          userFavArray = userObj.data().favourites;\n\n          if (!userObj.data().favourites.includes(locationInfo.id)) {\n            userFavArray.push(locationInfo.id);\n          } else {\n            console.log(\"already added to favourites\");\n          }\n        } else {\n          userFavArray.push(locationInfo.id);\n        }\n\n        db.collection(\"users\").doc(userObj.id).update({\n          favourites: userFavArray\n        }).then(function () {\n          console.log(\"successfully finished update process\");\n        }).catch(function (err) {\n          console.log(\"error while updating\");\n          console.log(err);\n        });\n      }\n    }).catch(function (err) {\n      console.log(\"error in adding to favourites\");\n      console.log(err);\n    });\n  };\n\n  var mapMoved = function mapMoved(data) {};\n\n  React.useLayoutEffect(function () {\n    navigation.setOptions({\n      headerRight: function headerRight() {\n        return React.createElement(Ionicons, {\n          style: {\n            marginRight: 30\n          },\n          name: \"heart\",\n          size: 30,\n          color: \"#FF0000\",\n          onPress: showFavourites,\n          __self: _this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 11\n          }\n        });\n      }\n    });\n  }, [navigation, {}]);\n  return React.createElement(View, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, React.createElement(MapView, {\n    style: {\n      width: Dimensions.get(\"window\").width,\n      height: Dimensions.get(\"window\").height / 3\n    },\n    initialRegion: currRegion,\n    onRegionChangeComplete: mapMoved,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 14\n    }\n  }, React.createElement(Marker, {\n    coordinate: {\n      latitude: currRegion.latitude,\n      longitude: currRegion.longitude\n    },\n    title: locationInfo.title,\n    description: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 17\n    }\n  })), React.createElement(Switch, {\n    trackColor: {\n      false: \"#767577\",\n      true: \"#81b0ff\"\n    },\n    thumbColor: isEnabled ? \"#f5dd4b\" : \"#f4f3f4\",\n    ios_backgroundColor: \"#3e3e3e\",\n    onValueChange: addOrDelete,\n    value: isEnabled,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }));\n};\n\nexport default CacheDetailsScreen;","map":{"version":3,"sources":["/Users/graphic/Desktop/Web Dev adv Project/treasure-hunt/CacheDetailsScreen.js"],"names":["React","useEffect","useState","db","location","AsyncStorage","MapView","Marker","Ionicons","CacheDetailsScreen","navigation","route","locationInfo","params","user","userObj","userFavArray","isEnabled","setEnabled","radioDataForTrackingStatus","label","accessibilityLabel","latitude","longitude","latitudeDelta","longitudeDelta","currRegion","setCurrRegion","console","log","collection","where","get","then","querySnapShot","size","forEach","doc","data","favourites","includes","id","catch","showFavourites","navigate","addOrDelete","value","addToFavourites","deleteFromFavourites","index","indexOf","splice","update","err","push","mapMoved","useLayoutEffect","setOptions","headerRight","marginRight","width","Dimensions","height","title","false","true"],"mappings":"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","sourcesContent":["import React ,{useEffect,useState} from 'react';\nimport { View, Text, Dimensions, Button, Switch} from 'react-native';\nimport { db } from './FirebaseManager';\nimport * as location from 'expo-location';\nimport { StyleSheet } from 'react-native';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport  MapView, {Marker} from 'react-native-maps';\nimport Ionicons from 'react-native-vector-icons/Ionicons';\n//import RadioButtonRN from 'radio-buttons-react-native';\n\nconst CacheDetailsScreen = ({navigation,route}) => {\n   \n    const locationInfo = route.params.locationInfo;\n   let user=route.params.user;\n   \n    \n    let userObj={};\n    let userFavArray=[];\n    const [isEnabled,setEnabled]=useState(false);\n    const radioDataForTrackingStatus = [\n      {\n        label: 'started',\n        accessibilityLabel: 'started'\n       },\n       {\n        label: 'in-progress',\n        accessibilityLabel: 'in-progress'\n       },\n       {\n        label: 'completed',\n        accessibilityLabel: 'Completed'\n       }\n      ];\n    const [currRegion,setCurrRegion]=React.useState({\n      //latitude:43.656290660189946,\n      latitude:locationInfo.location.latitude,\n      longitude:locationInfo.location.longitude,\n      latitudeDelta:0.005,\n      longitudeDelta:0.005 \n    });\n\n    useEffect(() => {   \n      \n    //  AsyncStorage.getItem(\"username\").then((data) => {user=data;console.log(\"async useeffect\"+user);\n      console.log(\"user from route useeffect\"+user);\n        db.collection(\"users\").where(\"username\",\"==\",user).get()\n        .then((querySnapShot) => {\n          if(querySnapShot.size === 0 ){\n            console.log(\"useeffect\");\n            console.log(\"couldnt find user\");\n          }else{\n            querySnapShot.forEach((doc) => {\n              userObj=doc;\n            });//forEach\n  \n            if(\"favourites\" in userObj.data()){\n              userFavArray=userObj.data().favourites;\n               if(userObj.data().favourites.includes(locationInfo.id)){\n                  setEnabled(true);\n               }else{\n                  setEnabled(false);\n               }\n              }\n  \n          }//else\n        })\n        .catch();\n\n\n      \n   //   }).catch();\n      \n      \n    },[]);\n\n    const showFavourites = () =>{\n        navigation.navigate(\"Favourites\");\n    }\n\n    const addOrDelete = (value) =>{\n      setEnabled(value);\n      console.log(\" add or delete user\"+user);\n      if(value === true){\n          addToFavourites();\n      }else{\n          deleteFromFavourites();\n      }\n    }\n\n    const deleteFromFavourites = () => {\n      db.collection(\"users\").where(\"username\",\"==\",user).get()\n      .then((querySnapShot) => {\n        console.log(\"user\" + user);\n        if(querySnapShot.size === 0 ){\n          console.log(\"couldnt find user\");\n        }else{\n          querySnapShot.forEach((doc) => {\n            userObj=doc;\n          });//forEach\n\n\n          if(\"favourites\" in userObj.data()){\n            userFavArray=userObj.data().favourites;\n             if(userObj.data().favourites.includes(locationInfo.id)){\n              const index = userObj.data().favourites.indexOf(locationInfo.id);\n              if (index > -1) {\n                  userFavArray.splice(index, 1);\n              }\n              }else{\n                console.log(\"doesnt exist to delete\");\n              }\n          }\n\n\n          //update db\n          db.collection(\"users\").doc(userObj.id).update({\n            favourites:userFavArray\n       })\n       .then(() => {console.log(\"successfully finished update process = delete\");})\n       .catch((err)=>{\n         console.log(\"error while updating delete\");\n         console.log(err);\n       });\n\n\n\n        }//else\n      })\n      .catch((err) => {console.log(err);});\n    }\n    const addToFavourites = () => {\n       db.collection(\"users\").where(\"username\",\"==\",user).get()\n        .then((querySnapShot) => {\n          if(querySnapShot.size === 0 ){\n            console.log(\"couldnt find user\");\n          }else{\n            querySnapShot.forEach((doc) => {\n              userObj=doc;\n            });//forEach\n            \n            if(\"favourites\" in userObj.data()){\n              userFavArray=userObj.data().favourites;\n               if(!userObj.data().favourites.includes(locationInfo.id)){\n                  userFavArray.push(locationInfo.id);\n                }else{\n                  console.log(\"already added to favourites\");\n                }\n            }else{\n              userFavArray.push(locationInfo.id);\n            }\n            \n           \n            //update db\n           db.collection(\"users\").doc(userObj.id).update({\n                favourites:userFavArray\n           })\n           .then(() => {console.log(\"successfully finished update process\");})\n           .catch((err)=>{\n             console.log(\"error while updating\");\n             console.log(err);\n           });\n          }//else\n            \n        })//then\n        .catch((err) => {console.log(\"error in adding to favourites\");console.log(err);});\n    }\n\n    const mapMoved = (data) => {\n      // setCurrRegion(data)\n     }\n\n    React.useLayoutEffect(() => {\n      navigation.setOptions({\n        headerRight : () => ( \n          <Ionicons\n          style={{marginRight:30}}\n            name=\"heart\"\n            size={30}\n            color=\"#FF0000\"\n            onPress={showFavourites}\n          />\n    )\n      })\n    }, [navigation,{}]);\n\n\n   \n   \n\n    return (\n        <View>\n             <MapView \n                style={{width:Dimensions.get(\"window\").width, height:Dimensions.get(\"window\").height/3}}\n                initialRegion={currRegion}\n                onRegionChangeComplete={mapMoved} >\n      \n                <Marker coordinate={{latitude:currRegion.latitude,\n                longitude:currRegion.longitude}} title={locationInfo.title} description=\"\"></Marker>\n\n            </MapView>\n            <Switch \n               trackColor={{ false: \"#767577\", true: \"#81b0ff\" }}\n               thumbColor={isEnabled ? \"#f5dd4b\" : \"#f4f3f4\"}\n               ios_backgroundColor=\"#3e3e3e\"\n               onValueChange={addOrDelete}\n               value={isEnabled}/>\n\n            {/* <RadioButtonRN\n              data={radioDataForTrackingStatus}\n              selectedBtn={(e) => {}}\n              onValueChange={(val)=>{console.log(val);}}\n            /> */}\n            \n        </View>\n    );\n}\n\nexport default CacheDetailsScreen;"]},"metadata":{},"sourceType":"module"}